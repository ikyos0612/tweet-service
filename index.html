<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Å§„Å∂„ÇÑ„Åç„Çµ„Éº„Éì„ÇπT</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { MessageCircle, Share, Plus, RefreshCw, Download, Upload, Send, ArrowLeft } = lucide;

        const TweetService = () => {
          const [tweets, setTweets] = useState([]);
          const [newTweet, setNewTweet] = useState('');
          const [isLoading, setIsLoading] = useState(false);
          const [message, setMessage] = useState('');
          const [replyingTo, setReplyingTo] = useState(null);
          const [replyText, setReplyText] = useState('');
          const [showReplies, setShowReplies] = useState(new Set());

          // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„ÇâË™≠„ÅøËæº„Åø
          useEffect(() => {
            loadTweets();
          }, []);

          // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø
          const loadTweets = () => {
            setIsLoading(true);
            try {
              const savedTweets = localStorage.getItem('tweets-service-t');
              
              if (savedTweets) {
                setTweets(JSON.parse(savedTweets));
              } else {
                // ÂàùÂõû„ÅÆÂ†¥Âêà„ÄÅ„Çµ„É≥„Éó„É´„Éá„Éº„Çø„ÇíË®≠ÂÆö
                const sampleTweets = [
                  {
                    id: 1,
                    username: '„Åï„Åè„Çâ',
                    handle: '@sakura_chan',
                    time: '2ÂàÜÂâç',
                    content: '‰ªäÊó•„ÅØ„ÅäÂ§©Ê∞ó„Åå„Å®„Å¶„ÇÇËâØ„Åè„Å¶„ÄÅ„ÅäÊï£Ê≠©„ÅåÊ•Ω„Åó„Åã„Å£„Åü„Åß„Åôüå∏‚ú®',
                    replies: [],
                    avatar: 'üå∏'
                  },
                  {
                    id: 2,
                    username: '„Åø„Åã„Çì',
                    handle: '@mikan_love',
                    time: '5ÂàÜÂâç',
                    content: '„Ç´„Éï„Çß„ÅßÊñ∞„Åó„ÅÑ„Çπ„Ç§„Éº„ÉÑ„ÇíÁô∫Ë¶ãÔºÅ„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉÁæéÂë≥„Åó„Åù„ÅÜ„Äúüç∞üíï',
                    replies: [
                      {
                        id: 21,
                        username: '„Å≤„Åæ„Çè„Çä',
                        handle: '@himawari_sun',
                        time: '3ÂàÜÂâç',
                        content: '„Å©„Åì„ÅÆ„Ç´„Éï„Çß„Åß„Åô„ÅãÔºüÁßÅ„ÇÇË°å„Å£„Å¶„Åø„Åü„ÅÑ„Åß„ÅôÔºÅ',
                        avatar: 'üåª'
                      }
                    ],
                    avatar: 'üçä'
                  },
                  {
                    id: 3,
                    username: '„Å≤„Åæ„Çè„Çä',
                    handle: '@himawari_sun',
                    time: '10ÂàÜÂâç',
                    content: '„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞ÂãâÂº∑‰∏≠ÔºÅ‰ªäÊó•„ÅØReact„ÇíËß¶„Å£„Å¶„Åø„Åæ„Åó„Åüüë©‚Äçüíª',
                    replies: [],
                    avatar: 'üåª'
                  }
                ];
                setTweets(sampleTweets);
                saveTweets(sampleTweets);
              }
              
              setMessage('‚úÖ „Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü');
              setTimeout(() => setMessage(''), 2000);
            } catch (err) {
              console.error('Error loading tweets:', err);
              setMessage('‚ùå „Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            } finally {
              setIsLoading(false);
            }
          };

          // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´„Éá„Éº„Çø„Çí‰øùÂ≠ò
          const saveTweets = (tweetsToSave) => {
            try {
              localStorage.setItem('tweets-service-t', JSON.stringify(tweetsToSave));
            } catch (err) {
              console.error('Error saving tweets:', err);
              setMessage('‚ùå „Éá„Éº„Çø„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            }
          };

          // „Å§„Å∂„ÇÑ„Åç„ÇíÊäïÁ®ø
          const handleTweet = () => {
            if (newTweet.trim()) {
              const tweet = {
                id: Date.now(),
                username: '„ÅÇ„Å™„Åü',
                handle: '@you',
                time: '„Åü„Å£„Åü‰ªä',
                content: newTweet,
                replies: [],
                avatar: 'üíé'
              };
              const updatedTweets = [tweet, ...tweets];
              setTweets(updatedTweets);
              setNewTweet('');
              saveTweets(updatedTweets);
              setMessage('‚úÖ „Å§„Å∂„ÇÑ„Åç„ÇíÊäïÁ®ø„Åó„Åæ„Åó„Åü');
              setTimeout(() => setMessage(''), 2000);
            }
          };

          // „É™„Éó„É©„Ç§„ÇíÊäïÁ®ø
          const handleReply = (tweetId) => {
            if (replyText.trim()) {
              const reply = {
                id: Date.now(),
                username: '„ÅÇ„Å™„Åü',
                handle: '@you',
                time: '„Åü„Å£„Åü‰ªä',
                content: replyText,
                avatar: 'üíé'
              };
              
              const updatedTweets = tweets.map(tweet => {
                if (tweet.id === tweetId) {
                  return {
                    ...tweet,
                    replies: [...tweet.replies, reply]
                  };
                }
                return tweet;
              });
              
              setTweets(updatedTweets);
              setReplyText('');
              setReplyingTo(null);
              saveTweets(updatedTweets);
              
              // „É™„Éó„É©„Ç§ÊäïÁ®øÂæå„ÄÅ„Åù„ÅÆ„ÉÑ„Ç§„Éº„Éà„ÅÆ„É™„Éó„É©„Ç§„ÇíË°®Á§∫
              const newShowReplies = new Set(showReplies);
              newShowReplies.add(tweetId);
              setShowReplies(newShowReplies);
              
              setMessage('‚úÖ „É™„Éó„É©„Ç§„ÇíÊäïÁ®ø„Åó„Åæ„Åó„Åü');
              setTimeout(() => setMessage(''), 2000);
            }
          };

          // „É™„Éó„É©„Ç§Ë°®Á§∫„ÅÆÂàá„ÇäÊõø„Åà
          const toggleReplies = (tweetId) => {
            const newShowReplies = new Set(showReplies);
            if (newShowReplies.has(tweetId)) {
              newShowReplies.delete(tweetId);
            } else {
              newShowReplies.add(tweetId);
            }
            setShowReplies(newShowReplies);
          };

          // „Éá„Éº„Çø„ÇíJSON„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
          const exportData = () => {
            const data = {
              tweets,
              exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `tweets-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            setMessage('‚úÖ „Éá„Éº„Çø„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„Åü');
            setTimeout(() => setMessage(''), 2000);
          };

          // JSON„Éï„Ç°„Ç§„É´„Åã„Çâ„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà
          const importData = (event) => {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
              try {
                const data = JSON.parse(e.target.result);
                if (data.tweets && Array.isArray(data.tweets)) {
                  setTweets(data.tweets);
                  saveTweets(data.tweets);
                  setMessage('‚úÖ „Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà„Åó„Åæ„Åó„Åü');
                  setTimeout(() => setMessage(''), 2000);
                } else {
                  throw new Error('ÁÑ°Âäπ„Å™„Éá„Éº„ÇøÂΩ¢Âºè„Åß„Åô');
                }
              } catch (err) {
                console.error('Import error:', err);
                setMessage('‚ùå „Éá„Éº„Çø„ÅÆ„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                setTimeout(() => setMessage(''), 3000);
              }
            };
            reader.readAsText(file);
            event.target.value = '';
          };

          // „Éá„Éº„Çø„Çí„ÇØ„É™„Ç¢
          const clearData = () => {
            if (window.confirm('„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂÖÉ„Å´Êàª„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
              localStorage.removeItem('tweets-service-t');
              setTweets([]);
              setMessage('‚úÖ „Éá„Éº„Çø„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü');
              setTimeout(() => setMessage(''), 2000);
            }
          };

          return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-cyan-50 via-blue-50 to-sky-50" },
            // Header
            React.createElement('div', { className: "bg-white/80 backdrop-blur-sm border-b border-cyan-200 sticky top-0 z-10" },
              React.createElement('div', { className: "max-w-2xl mx-auto px-4 py-3 flex justify-between items-center" },
                React.createElement('h1', { className: "text-2xl font-bold bg-gradient-to-r from-cyan-500 to-blue-500 bg-clip-text text-transparent flex items-center gap-2" },
                  React.createElement('span', { className: "text-3xl" }, 'üíé'),
                  '„Å§„Å∂„ÇÑ„Åç„Çµ„Éº„Éì„Çπ„ÄåT„Äç'
                ),
                React.createElement('div', { className: "flex gap-2" },
                  React.createElement('button', {
                    onClick: loadTweets,
                    disabled: isLoading,
                    className: "p-2 text-blue-500 hover:bg-blue-50 rounded-full transition-colors",
                    title: "Êõ¥Êñ∞"
                  }, React.createElement(RefreshCw, { size: 20, className: isLoading ? 'animate-spin' : '' })),
                  React.createElement('button', {
                    onClick: exportData,
                    className: "p-2 text-green-500 hover:bg-green-50 rounded-full transition-colors",
                    title: "„Éá„Éº„Çø„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ"
                  }, React.createElement(Download, { size: 20 })),
                  React.createElement('label', { className: "p-2 text-cyan-500 hover:bg-cyan-50 rounded-full transition-colors cursor-pointer", title: "„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà" },
                    React.createElement(Upload, { size: 20 }),
                    React.createElement('input', {
                      type: "file",
                      accept: ".json",
                      onChange: importData,
                      className: "hidden"
                    })
                  ),
                  React.createElement('button', {
                    onClick: clearData,
                    className: "p-2 text-red-500 hover:bg-red-50 rounded-full transition-colors",
                    title: "„Éá„Éº„Çø„Çí„ÇØ„É™„Ç¢"
                  }, 'üóëÔ∏è')
                )
              )
            ),

            React.createElement('div', { className: "max-w-2xl mx-auto px-4 py-6" },
              // Status Message
              message && React.createElement('div', { className: "bg-white/90 backdrop-blur-sm border-2 border-blue-200 rounded-2xl p-3 mb-4 text-center font-medium" },
                message
              ),

              // Tweet Compose
              React.createElement('div', { className: "bg-white/90 backdrop-blur-sm rounded-3xl p-6 mb-6 shadow-lg border border-cyan-100" },
                React.createElement('div', { className: "flex gap-4" },
                  React.createElement('div', { className: "w-12 h-12 bg-gradient-to-r from-cyan-300 to-blue-300 rounded-full flex items-center justify-center text-xl" },
                    'üíé'
                  ),
                  React.createElement('div', { className: "flex-1" },
                    React.createElement('textarea', {
                      value: newTweet,
                      onChange: (e) => setNewTweet(e.target.value),
                      placeholder: "‰ªä„ÄÅ‰Ωï„Åó„Å¶„ÇãÔºü‚ú®",
                      className: "w-full p-4 border-2 border-cyan-200 rounded-2xl resize-none focus:outline-none focus:border-blue-300 focus:ring-2 focus:ring-blue-100 transition-all duration-200 bg-cyan-50/50",
                      rows: "3"
                    }),
                    React.createElement('div', { className: "flex justify-between items-center mt-3" },
                      React.createElement('span', { className: "text-sm text-gray-500" },
                        `${280 - newTweet.length} ÊñáÂ≠ó`
                      ),
                      React.createElement('button', {
                        onClick: handleTweet,
                        disabled: !newTweet.trim(),
                        className: "px-6 py-2 bg-gradient-to-r from-cyan-400 to-blue-400 text-white rounded-full font-medium hover:from-cyan-500 hover:to-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2"
                      },
                        React.createElement(Plus, { size: 16 }),
                        '„Å§„Å∂„ÇÑ„Åè'
                      )
                    )
                  )
                )
              ),

              // Loading
              isLoading && React.createElement('div', { className: "text-center py-8" },
                React.createElement(RefreshCw, { className: "animate-spin mx-auto mb-2 text-blue-500", size: 32 }),
                React.createElement('p', { className: "text-gray-600" }, 'Ë™≠„ÅøËæº„Åø‰∏≠...')
              ),

              // Tweet List
              React.createElement('div', { className: "space-y-4" },
                tweets.map((tweet) =>
                  React.createElement('div', { key: tweet.id, className: "bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg border border-cyan-100 hover:shadow-xl transition-all duration-200" },
                    React.createElement('div', { className: "flex gap-4" },
                      React.createElement('div', { className: "w-12 h-12 bg-gradient-to-r from-cyan-300 to-blue-300 rounded-full flex items-center justify-center text-xl shrink-0" },
                        tweet.avatar
                      ),
                      React.createElement('div', { className: "flex-1 min-w-0" },
                        React.createElement('div', { className: "flex items-center gap-2 mb-2" },
                          React.createElement('span', { className: "font-bold text-gray-800" }, tweet.username),
                          React.createElement('span', { className: "text-gray-500 text-sm" }, tweet.handle),
                          React.createElement('span', { className: "text-gray-400 text-sm" }, '¬∑'),
                          React.createElement('span', { className: "text-gray-400 text-sm" }, tweet.time)
                        ),
                        React.createElement('p', { className: "text-gray-800 mb-4 leading-relaxed" },
                          tweet.content
                        ),
                        React.createElement('div', { className: "flex items-center gap-6" },
                          React.createElement('button', {
                            onClick: () => toggleReplies(tweet.id),
                            className: "flex items-center gap-2 text-gray-500 hover:text-blue-500 transition-colors group"
                          },
                            React.createElement('div', { className: "p-2 rounded-full group-hover:bg-blue-50" },
                              React.createElement(MessageCircle, { size: 16 })
                            ),
                            React.createElement('span', { className: "text-sm" }, tweet.replies.length)
                          ),
                          React.createElement('button', {
                            onClick: () => setReplyingTo(tweet.id),
                            className: "px-3 py-1 text-sm text-blue-500 hover:bg-blue-50 rounded-full transition-colors"
                          }, 'Ëøî‰ø°„Åô„Çã'),
                          React.createElement('button', { className: "flex items-center gap-2 text-gray-500 hover:text-cyan-500 transition-colors group" },
                            React.createElement('div', { className: "p-2 rounded-full group-hover:bg-cyan-50" },
                              React.createElement(Share, { size: 16 })
                            )
                          )
                        ),

                        // Reply Input
                        replyingTo === tweet.id && React.createElement('div', { className: "mt-4 p-4 bg-blue-50/50 rounded-2xl border border-blue-200" },
                          React.createElement('div', { className: "flex gap-3" },
                            React.createElement('div', { className: "w-8 h-8 bg-gradient-to-r from-cyan-300 to-blue-300 rounded-full flex items-center justify-center text-sm" },
                              'üíé'
                            ),
                            React.createElement('div', { className: "flex-1" },
                              React.createElement('textarea', {
                                value: replyText,
                                onChange: (e) => setReplyText(e.target.value),
                                placeholder: `${tweet.handle} „Å´Ëøî‰ø°...`,
                                className: "w-full p-3 border border-blue-200 rounded-xl resize-none focus:outline-none focus:border-blue-300 focus:ring-2 focus:ring-blue-100 transition-all duration-200 bg-white/80",
                                rows: "2"
                              }),
                              React.createElement('div', { className: "flex justify-between items-center mt-2" },
                                React.createElement('button', {
                                  onClick: () => {
                                    setReplyingTo(null);
                                    setReplyText('');
                                  },
                                  className: "px-3 py-1 text-sm text-gray-500 hover:bg-gray-100 rounded-full transition-colors flex items-center gap-1"
                                },
                                  React.createElement(ArrowLeft, { size: 14 }),
                                  '„Ç≠„É£„É≥„Çª„É´'
                                ),
                                React.createElement('button', {
                                  onClick: () => handleReply(tweet.id),
                                  disabled: !replyText.trim(),
                                  className: "px-4 py-1 bg-gradient-to-r from-cyan-400 to-blue-400 text-white rounded-full text-sm font-medium hover:from-cyan-500 hover:to-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-1"
                                },
                                  React.createElement(Send, { size: 14 }),
                                  'Ëøî‰ø°'
                                )
                              )
                            )
                          )
                        ),

                        // Replies
                        showReplies.has(tweet.id) && tweet.replies.length > 0 && React.createElement('div', { className: "mt-4 space-y-3" },
                          tweet.replies.map((reply) =>
                            React.createElement('div', { key: reply.id, className: "flex gap-3 p-4 bg-sky-50/50 rounded-2xl border border-sky-200" },
                              React.createElement('div', { className: "w-8 h-8 bg-gradient-to-r from-cyan-300 to-blue-300 rounded-full flex items-center justify-center text-sm shrink-0" },
                                reply.avatar
                              ),
                              React.createElement('div', { className: "flex-1 min-w-0" },
                                React.createElement('div', { className: "flex items-center gap-2 mb-1" },
                                  React.createElement('span', { className: "font-semibold text-gray-800 text-sm" }, reply.username),
                                  React.createElement('span', { className: "text-gray-500 text-xs" }, reply.handle),
                                  React.createElement('span', { className: "text-gray-400 text-xs" }, '¬∑'),
                                  React.createElement('span', { className: "text-gray-400 text-xs" }, reply.time)
                                ),
                                React.createElement('p', { className: "text-gray-700 text-sm leading-relaxed" },
                                  reply.content
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              ),

              // Empty State
              !isLoading && tweets.length === 0 && React.createElement('div', { className: "text-center py-12" },
                React.createElement('div', { className: "text-6xl mb-4" }, 'üíé'),
                React.createElement('p', { className: "text-gray-600 mb-4" }, '„Åæ„Å†„Å§„Å∂„ÇÑ„Åç„Åå„ÅÇ„Çä„Åæ„Åõ„Çì'),
                React.createElement('p', { className: "text-sm text-gray-500" }, 'ÊúÄÂàù„ÅÆ„Å§„Å∂„ÇÑ„Åç„ÇíÊäïÁ®ø„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ')
              ),

              // Info
              React.createElement('div', { className: "mt-8 text-center text-sm text-gray-500 bg-white/50 rounded-2xl p-4" },
                React.createElement('p', { className: "mb-2" }, 'üíæ ', React.createElement('strong', {}, '„Éá„Éº„Çø‰øùÂ≠ò'), ': „Éñ„É©„Ç¶„Ç∂„ÅÆ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´Ëá™Âãï‰øùÂ≠ò'),
                React.createElement('p', { className: "mb-2" }, 'üì± ', React.createElement('strong', {}, 'Ê∞∏Á∂öÂåñ'), ': „Éñ„É©„Ç¶„Ç∂„ÇíÈñâ„Åò„Å¶„ÇÇÊäïÁ®ø„ÅåÊÆã„Çä„Åæ„Åô'),
                React.createElement('p', { className: "mb-2" }, 'üí¨ ', React.createElement('strong', {}, '„É™„Éó„É©„Ç§Ê©üËÉΩ'), ': „Å§„Å∂„ÇÑ„Åç„Å´Ëøî‰ø°„Åó„Å¶„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÇíÊ•Ω„Åó„ÇÇ„ÅÜ'),
                React.createElement('p', {}, 'üí° ', React.createElement('strong', {}, '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó'), ': Âè≥‰∏ä„ÅÆ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Éú„Çø„É≥„Åß„Éá„Éº„Çø„ÇíJSON„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶‰øùÂ≠òÂèØËÉΩ')
              )
            )
          );
        };

        ReactDOM.render(React.createElement(TweetService), document.getElementById('root'));
    </script>
</body>
</html>
